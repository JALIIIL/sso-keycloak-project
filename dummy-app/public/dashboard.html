<!DOCTYPE html><html lang="fr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Espace Utilisateur</title><style>body{font-family:Arial,sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);display:flex;justify-content:center;align-items:center;min-height:100vh;margin:0;padding:20px}.dashboard-container{background:white;padding:35px 45px;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,0.3);width:100%;max-width:500px}h2{text-align:center;color:#333;margin-bottom:30px}.info-card{background:#f8f9fa;padding:18px;border-radius:8px;margin-bottom:18px;border-left:4px solid #667eea}.label{font-weight:bold;color:#555;display:block;margin-bottom:8px;font-size:14px}.value{color:#333;font-size:18px}.roles-badge{display:inline-block;padding:6px 14px;border-radius:20px;font-size:13px;margin-right:5px}.role-user{background:#17a2b8;color:white}.role-admin{background:#dc3545;color:white}button{width:100%;padding:15px;margin-top:25px;font-size:16px;border:none;border-radius:8px;cursor:pointer;background:#dc3545;color:white}button:hover{background:#c82333}</style></head><body><div class="dashboard-container"><div id="loading">Chargement...</div><div id="user-content" style="display:none"><h2>Espace Utilisateur</h2><div class="info-card"><span class="label">Nom</span><span class="value" id="username">-</span></div><div class="info-card"><span class="label">Email</span><span class="value" id="email">-</span></div><div class="info-card"><span class="label">Roles</span><div id="roles">-</div></div><button onclick="logout()">Se deconnecter</button></div></div><script>async function loadUserInfo(){try{const response=await fetch('/api/user');const data=await response.json();if(data.authenticated){document.getElementById('loading').style.display='none';document.getElementById('user-content').style.display='block';document.getElementById('username').textContent=data.user.displayName||data.user.name||'Utilisateur';document.getElementById('email').textContent=data.user.email||'Non defini';const roles=data.user.roles||['user'];document.getElementById('roles').innerHTML=roles.map(r=>'<span class="roles-badge role-'+r+'">'+r+'</span>').join('')}else{window.location.href='/'}}catch(e){window.location.href='/'}}function logout(){if(confirm('Deconnexion?'))window.location.href='/logout'}loadUserInfo()</script></body></html>
